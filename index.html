<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ¦ï¸ Zephyra: Monitoreo ClimÃ¡tico</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <div class="bg-animation">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>

  <header>
    <h1>ğŸŒ Zephyra: Monitoreo DinÃ¡mico del Clima</h1>
  </header>

  <div class="container">
    <!-- Panel de clima en tiempo real con animaciones -->
    <div id="weather-effects" class="weather-effects-container"></div>
    
    <div id="search-panel">
      <div class="search-wrapper">
        <!-- Contenedor del input con autocompletado -->
        <div class="search-container">
          <input type="text" id="search-input" placeholder="ğŸ” Busca una ciudad o paÃ­s..." autocomplete="off">
          <div id="suggestions" class="suggestions-box"></div>
        </div>
        
        <button onclick="buscarClima()">ğŸ” Buscar</button>
        <button onclick="obtenerFavoritos()">â­ Ver Favoritos</button>
        <select id="favoritos-list" style="display:none;">
          <option>Selecciona un favorito</option>
        </select>
      </div>
    </div>

    <div id="map"></div>

    <div id="data-panel">
      <h2 id="ubicacion">ğŸ“ UbicaciÃ³n no detectada</h2>
      
      <!-- Indicador de efecto climÃ¡tico activo -->
      <div id="effect-indicator" style="display: none; background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center; font-weight: 600; color: #667eea;"></div>
      
      <div id="clima-actual"><div class="loading"></div> Cargando datos climÃ¡ticos...</div>

      <h3>ğŸ“Š Fuentes de Datos</h3>
      <table id="tabla-fuentes">
        <thead>
          <tr>
            <th>Fuente</th>
            <th>Estado</th>
            <th>Temp Â°C</th>
            <th>Humedad %</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <h3>ğŸ¯ Consenso Actual</h3>
      <table id="tabla-consenso">
        <thead>
          <tr>
            <th>Estado</th>
            <th>Temp Â°C</th>
            <th>Humedad %</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <h3>ğŸ”® ProyecciÃ³n (Promedio a 7 dÃ­as)</h3>
      <div id="proyeccion"><div class="loading"></div> Calculando proyecciÃ³n...</div>

      <div class="action-buttons">
        <button onclick="guardarFavorito()">ğŸ’¾ Guardar como Favorito</button>
        <button onclick="verHistorico()">ğŸ“ˆ Ver HistÃ³rico</button>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>